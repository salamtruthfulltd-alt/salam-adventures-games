<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Spell Stack: Skyward 20</title>
    <style>
        :root { 
            --neon: #00f2ff; --gold: #ffcc00; --wood: #5D4037;
            --bg-dark: #050510;
        }
        
        body { 
            margin: 0; padding: 0; font-family: 'Segoe UI', sans-serif;
            background: #0a0a15; color: white;
            display: flex; flex-direction: column; align-items: center;
            min-height: 100vh; overflow: hidden;
        }

        /* HUD */
        .hud { 
            display: flex; gap: 40px; background: rgba(0,0,0,0.85);
            padding: 15px 50px; border-radius: 0 0 40px 40px;
            border: 2px solid var(--neon); border-top: none;
            box-shadow: 0 0 20px rgba(0, 242, 255, 0.4); z-index: 100;
        }
        .stat { text-align: center; }
        .label { font-size: 0.75rem; color: #888; text-transform: uppercase; letter-spacing: 1px; }
        .val { font-size: 1.6rem; color: var(--neon); font-weight: bold; text-shadow: 0 0 10px var(--neon); }

        /* THE ENLARGED FRAME */
        #tower-frame {
            width: 400px; height: 550px; /* Bigger Frame */
            background: var(--bg-dark);
            border: 12px solid var(--wood);
            border-bottom: 25px solid #222;
            border-radius: 15px; position: relative; margin-top: 15px;
            display: flex; flex-direction: column; 
            box-shadow: 0 0 50px rgba(0,0,0,1);
            overflow: hidden;
        }

        /* GRAPHICS INSIDE THE FRAME */
        .internal-bg {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(to bottom, #020111, #191621);
            z-index: 1;
        }
        .internal-stars {
            position: absolute; width: 100%; height: 100%;
            background-image: radial-gradient(white, rgba(255,255,255,.2) 2px, transparent 40px);
            background-size: 50px 50px; opacity: 0.3; z-index: 2;
        }
        .internal-city {
            position: absolute; bottom: 0; width: 100%; height: 120px;
            background: linear-gradient(transparent, rgba(0,0,0,0.8));
            display: flex; align-items: flex-end; justify-content: space-around;
            z-index: 3; opacity: 0.6;
        }
        .mini-building { width: 30px; background: #000; border-top: 2px solid #111; }

        /* SELECTION ZONE / CRANE */
        #selection-zone {
            height: 80px; background: rgba(0, 242, 255, 0.1);
            border-bottom: 3px dashed var(--neon);
            display: flex; justify-content: space-around; align-items: center;
            font-size: 2.2rem; color: var(--gold); font-weight: 900;
            z-index: 10; position: relative;
        }

        /* BRICK STACK */
        #stack { 
            flex-grow: 1; display: flex; flex-direction: column-reverse; 
            padding: 10px; z-index: 10; position: relative;
        }
        .brick {
            height: 40px; margin: 2px 0; border-radius: 6px;
            display: flex; align-items: center; justify-content: center;
            font-weight: 800; color: #fff; font-size: 1.1rem;
            text-shadow: 1px 1px 2px #000;
            border: 1px solid rgba(255,255,255,0.4);
            box-shadow: inset 0 0 15px rgba(255,255,255,0.3);
            animation: slamDown 0.25s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes slamDown { from { transform: translateY(-500px) scale(1.5); opacity: 0; } to { transform: translateY(0) scale(1); opacity: 1; } }

        /* OVERLAY */
        #menu {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.85); z-index: 100;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .start-btn {
            padding: 20px 50px; font-size: 1.8rem; font-weight: bold;
            background: #2ecc71; color: white; border: none; border-radius: 12px;
            cursor: pointer; box-shadow: 0 6px 0 #27ae60; transition: 0.1s;
        }
        .start-btn:active { transform: translateY(4px); box-shadow: 0 2px 0 #27ae60; }

        /* INPUT AREA */
        #puzzle-text { font-size: 3.5rem; margin: 15px 0; font-weight: 900; letter-spacing: 6px; text-shadow: 0 0 15px var(--neon); }
        #typer { 
            font-size: 2rem; width: 300px; padding: 15px; border-radius: 15px;
            border: 4px solid var(--neon); background: #000; color: white; text-align: center;
            outline: none; box-shadow: 0 0 20px rgba(0,242,255,0.2);
        }

        #leaderboard {
            margin-top: 15px; width: 400px; background: rgba(255,255,255,0.95); color: #222;
            border-radius: 10px; padding: 10px; max-height: 120px; overflow-y: auto;
        }
        .row { display: flex; justify-content: space-between; border-bottom: 1px solid #ddd; padding: 4px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="hud">
        <div class="stat"><div class="label">Timer</div><div class="val" id="t">60</div></div>
        <div class="stat"><div class="label">Score</div><div class="val" id="s">0</div></div>
        <div class="stat"><div class="label">Floor</div><div class="val" id="f">1</div></div>
    </div>

    <div id="tower-frame">
        <div class="internal-bg"></div>
        <div class="internal-stars"></div>
        <div class="internal-city" id="city-layer"></div>

        <div id="menu">
            <h1 style="color:var(--gold); margin-bottom: 30px; letter-spacing: 2px;">SKYWARD 20</h1>
            <button class="start-btn" onclick="startGame()">START GAME</button>
        </div>

        <div id="selection-zone">
            <span id="opt1">?</span>
            <span id="opt2">?</span>
            <span id="opt3">?</span>
        </div>
        <div id="stack"></div>
    </div>

    <div id="puzzle-text">READY?</div>
    <input type="text" id="typer" placeholder="Type letter..." disabled autocomplete="off">

    <div id="leaderboard">
        <div id="list"></div>
    </div>

<script>
    const data = [
        {w: "APPLE", m: "APP_E", a: "L"}, {w: "BREAD", m: "BRE_D", a: "A"},
        {w: "CLOUD", m: "CLO_D", a: "U"}, {w: "DRAGON", m: "DRA_ON", a: "G"},
        {w: "FLOWER", m: "FLO_ER", a: "W"}, {w: "GHOST", m: "GHO_T", a: "S"},
        {w: "HEART", m: "HEA_T", a: "R"}, {w: "JUICE", m: "JUI_E", a: "C"},
        {w: "LIGHT", m: "LIG_T", a: "H"}, {w: "MUSIC", m: "MUS_C", a: "I"}
    ];

    let state = { score: 0, time: 60, floor: 1, count: 0, active: false, cur: {} };
    let clock;

    // Generate internal city graphics
    const city = document.getElementById('city-layer');
    for(let i=0; i<15; i++) {
        let b = document.createElement('div');
        b.className = 'mini-building';
        b.style.height = (Math.random() * 80 + 20) + 'px';
        city.appendChild(b);
    }

    function startGame() {
        state.active = true; state.score = 0; state.time = 60; state.floor = 1; state.count = 0;
        document.getElementById('menu').style.display = 'none';
        document.getElementById('typer').disabled = false;
        document.getElementById('typer').focus();
        document.getElementById('stack').innerHTML = '';
        updateStats();
        
        clock = setInterval(() => {
            state.time--;
            document.getElementById('t').innerText = state.time;
            if(state.time <= 0) endGame();
        }, 1000);
        
        next();
    }

    function next() {
        state.cur = data[Math.floor(Math.random() * data.length)];
        document.getElementById('puzzle-text').innerText = state.cur.m;
        
        let opts = [state.cur.a];
        while(opts.length < 3) {
            let r = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(Math.random()*26)];
            if(!opts.includes(r)) opts.push(r);
        }
        opts.sort(() => Math.random() - 0.5);
        document.getElementById('opt1').innerText = opts[0];
        document.getElementById('opt2').innerText = opts[1];
        document.getElementById('opt3').innerText = opts[2];
    }

    document.getElementById('typer').addEventListener('input', (e) => {
        if(!state.active) return;
        if(e.target.value.toUpperCase() === state.cur.a) {
            e.target.value = '';
            addBrick();
        }
    });

    function addBrick() {
        state.score += (100 * state.floor);
        state.count++;
        updateStats();
        
        let b = document.createElement('div');
        b.className = 'brick';
        b.innerText = state.cur.w;
        const colors = ['#00f2ff', '#ff00de', '#7cfc00', '#ff8c00', '#ffea00'];
        b.style.backgroundColor = colors[(state.floor-1) % 5];
        document.getElementById('stack').appendChild(b);

        if(state.count >= 10) {
            state.floor++; state.count = 0; state.time += 15;
            document.getElementById('stack').innerHTML = '';
            updateStats();
        }
        next();
    }

    function updateStats() {
        document.getElementById('s').innerText = state.score;
        document.getElementById('f').innerText = state.floor;
    }

    function endGame() {
        clearInterval(clock);
        state.active = false;
        let n = prompt("GAME OVER! Score: " + state.score + "\nName for Top 20:");
        if(n) {
            let scores = JSON.parse(localStorage.getItem('skyward_ultra') || '[]');
            scores.push({n: n.toUpperCase().substring(0,10), s: state.score});
            scores.sort((a,b) => b.s - a.s);
            localStorage.setItem('skyward_ultra', JSON.stringify(scores.slice(0, 20)));
        }
        location.reload();
    }

    function loadBoard() {
        let scores = JSON.parse(localStorage.getItem('skyward_ultra') || '[]');
        document.getElementById('list').innerHTML = scores.map((x, i) => 
            `<div class="row"><span>#${i+1} ${x.n}</span><span>${x.s}</span></div>`).join('');
    }
    loadBoard();
</script>
</body>
</html>
