<!DOCTYPE html>
<html>
<head>
    <title>Spell Climb: Top 20 Edition</title>
    <style>
        body { background: #2c3e50; color: white; font-family: 'Arial', sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        
        /* THE TOWER FRAME */
        #tower-frame {
            width: 300px; height: 400px;
            background: #ecf0f1;
            border: 10px solid #8d6e63;
            border-bottom: 20px solid #333;
            border-radius: 10px;
            position: relative;
            display: flex;
            flex-direction: column;
            justify-content: flex-end; /* Keeps bricks at the bottom */
            overflow: hidden;
        }

        .brick {
            width: 90%; height: 35px;
            margin: 2px auto;
            background: #d35400;
            border: 2px solid #a04000;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
            flex-shrink: 0;
            animation: bounceIn 0.3s ease;
        }

        @keyframes bounceIn {
            0% { transform: scale(0.3); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        /* UI ELEMENTS */
        .header { width: 320px; display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 1.2rem; font-weight: bold; }
        #word-to-type { font-size: 2.5rem; color: #2ecc71; margin: 10px 0; text-shadow: 2px 2px #000; }
        input { font-size: 1.5rem; width: 280px; padding: 10px; border-radius: 8px; border: none; text-align: center; }
        
        #leaderboard { margin-top: 20px; background: white; color: #333; padding: 15px; border-radius: 10px; width: 300px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        .score-row { display: flex; justify-content: space-between; border-bottom: 1px solid #eee; padding: 4px; font-size: 0.9rem; }
        
        .overlay { position: absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); display:none; flex-direction:column; align-items:center; justify-content:center; z-index: 5; }
        button { padding: 10px 20px; background: #f1c40f; border: none; font-weight: bold; cursor: pointer; border-radius: 5px; }
    </style>
</head>
<body onload="initGame()">

    <div class="header">
        <span>‚è≥ <span id="timer">60</span>s</span>
        <span>‚≠ê <span id="score">0</span></span>
        <span>Floor: <span id="lvl">1</span></span>
    </div>

    <div id="tower-frame">
        <div id="win-screen" class="overlay">
            <h1 style="color:#f1c40f">FLOOR CLEAR!</h1>
            <button onclick="nextLevel()">NEXT LEVEL</button>
        </div>
        <div id="brick-stack" style="display:flex; flex-direction:column-reverse;"></div>
    </div>

    <div id="word-to-type">START</div>
    <input type="text" id="typer" placeholder="Type here..." autocomplete="off">

    <div id="leaderboard">
        <h3 style="margin:0 0 10px 0; text-align:center">üèÜ TOP 20 RANKINGS</h3>
        <div id="score-list"></div>
    </div>

<script>
    const wordList = ["APPLE", "BREAD", "CHAIR", "DREAM", "EAGLE", "FRUIT", "GRAPE", "HOUSE", "IMAGE", "JUICE", "KNIFE", "LIGHT", "MOUSE", "NIGHT", "OCEAN", "PIANO", "QUEEN", "RIVER", "SMILE", "TABLE"];
    let game = { score: 0, lvl: 1, time: 60, current: "START", count: 0, active: false };
    let clock;

    function initGame() {
        showScores();
        const input = document.getElementById('typer');
        input.addEventListener('input', () => {
            if (input.value.toUpperCase() === game.current) {
                input.value = "";
                handleCorrectWord();
            }
        });
        input.focus();
    }

    function handleCorrectWord() {
        if (!game.active && game.current === "START") {
            game.active = true;
            startTimer();
            spawnWord();
        } else if (game.active) {
            game.score += 100;
            game.count++;
            document.getElementById('score').innerText = game.score;
            
            // Build visual brick
            const b = document.createElement('div');
            b.className = 'brick';
            b.innerText = game.current;
            document.getElementById('brick-stack').appendChild(b);

            if (game.count >= 10) {
                winFloor();
            } else {
                spawnWord();
            }
        }
    }

    function spawnWord() {
        game.current = wordList[Math.floor(Math.random() * wordList.length)];
        document.getElementById('word-to-type').innerText = game.current;
    }

    function startTimer() {
        clock = setInterval(() => {
            game.time--;
            document.getElementById('timer').innerText = game.time;
            if (game.time <= 0) gameOver();
        }, 1000);
    }

    function winFloor() {
        game.active = false;
        document.getElementById('win-screen').style.display = 'flex';
    }

    function nextLevel() {
        game.lvl++;
        game.count = 0;
        game.time += 20;
        document.getElementById('lvl').innerText = game.lvl;
        document.getElementById('brick-stack').innerHTML = "";
        document.getElementById('win-screen').style.display = 'none';
        game.active = true;
        spawnWord();
    }

    function gameOver() {
        clearInterval(clock);
        game.active = false;
        const name = prompt("Tower Collapsed! Final Score: " + game.score + "\nYour Name:");
        if (name) saveScore(name, game.score);
        location.reload();
    }

    function saveScore(name, score) {
        let scores = JSON.parse(localStorage.getItem('climb_20_final') || '[]');
        scores.push({n: name.substring(0,10).toUpperCase(), s: score});
        scores.sort((a,b) => b.s - a.s);
        localStorage.setItem('climb_20_final', JSON.stringify(scores.slice(0, 20)));
    }

    function showScores() {
        let scores = JSON.parse(localStorage.getItem('climb_20_final') || '[]');
        document.getElementById('score-list').innerHTML = scores.map((x, i) => 
            `<div class="score-row"><span>${i+1}. ${x.n}</span><span>${x.s}</span></div>`).join('');
    }
</script>
</body>
</html>
