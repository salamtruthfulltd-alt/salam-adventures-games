<!DOCTYPE html>
<html>
<head>
    <title>Spell Climb: 20-Rank Edition</title>
    <style>
        :root { --wood: #5D4037; --leaf: #4CAF50; --sky: #E3F2FD; --gold: #FFD700; }
        body { background: #1a1a1a; color: white; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        
        /* THE WOODEN CLIMBING FRAME */
        #climb-frame {
            width: 320px; height: 450px;
            background: var(--sky);
            border: 10px solid var(--wood);
            border-bottom: 15px solid #333;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: column-reverse; /* Bricks stack from bottom */
        }

        .brick {
            width: 90%; height: 35px;
            margin: 2px auto;
            background: #8D6E63;
            border: 2px solid #5D4037;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: #fff;
            font-size: 0.9rem;
            animation: popIn 0.3s ease;
        }
        @keyframes popIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* UI STUFF */
        .stats-bar { width: 340px; display: flex; justify-content: space-between; margin-bottom: 10px; font-weight: bold; }
        input { font-size: 1.5rem; width: 300px; padding: 10px; margin-top: 15px; border-radius: 5px; border: none; text-align: center; }
        
        #board-container { margin-top: 20px; background: #fff; color: #333; padding: 15px; border-radius: 10px; width: 320px; box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
        .score-row { display: flex; justify-content: space-between; border-bottom: 1px solid #eee; padding: 3px 0; font-size: 0.8rem; }
        
        .level-up { position: absolute; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); display:none; flex-direction:column; align-items:center; justify-content:center; }
    </style>
</head>
<body onload="initBoard()">

<div class="stats-bar">
    <span>‚è±Ô∏è <span id="timer">60</span>s</span>
    <span style="color:var(--gold)">üí∞ <span id="score">0</span></span>
    <span>üìç LVL <span id="lvl">1</span></span>
</div>

<div id="climb-frame">
    <div id="level-overlay" class="level-up">
        <h1 style="color:var(--gold)">FLOOR CLEARED!</h1>
        <button onclick="startNextLevel()" style="padding:10px 20px; cursor:pointer; font-weight:bold;">CLIMB HIGHER</button>
    </div>
</div>

<div id="game-ui">
    <h2 id="target-word" style="text-align:center; color:var(--leaf); letter-spacing: 2px;">READY?</h2>
    <input type="text" id="typer" placeholder="Type word here..." autocomplete="off">
</div>

<div id="board-container">
    <h3 style="margin-top:0; text-align:center;">üèÜ TOP 20 BUILDERS</h3>
    <div id="scores-list" style="max-height: 200px; overflow-y: auto;"></div>
</div>

<script>
    const dictionary = {
        easy: ["Cat", "Sun", "Ball", "Cake", "Tree", "Fish", "Jump", "Blue", "Lamp", "Milk"],
        mid: ["Planet", "Window", "Rocket", "Orange", "Silver", "Garden", "Winter", "Helper"],
        hard: ["Building", "Dinosaur", "Mountain", "Elephant", "Computer", "Universe", "Chocolate"]
    };

    let game = { score: 0, lvl: 1, time: 60, word: "", bricks: 0, active: false };
    let clock;

    function initBoard() {
        renderScores();
        document.getElementById('typer').addEventListener('input', checkWord);
        // Auto-start message
        document.getElementById('target-word').innerText = "TYPE 'START'";
        game.word = "start";
        game.active = true;
    }

    function checkWord(e) {
        if(!game.active) return;
        if(e.target.value.toLowerCase() === game.word.toLowerCase()) {
            if(game.word === "start" && game.lvl === 1 && game.score === 0) {
                beginGame();
            } else {
                game.score += (100 * game.lvl);
                game.bricks++;
                document.getElementById('score').innerText = game.score;
                addBrickToFrame(game.word);
                
                if(game.bricks >= 10) {
                    winFloor();
                } else {
                    nextWord();
                }
            }
            e.target.value = "";
        }
    }

    function beginGame() {
        game.time = 60;
        if(clock) clearInterval(clock);
        clock = setInterval(() => {
            game.time--;
            document.getElementById('timer').innerText = game.time;
            if(game.time <= 0) endGame();
        }, 1000);
        nextWord();
    }

    function addBrickToFrame(txt) {
        const b = document.createElement('div');
        b.className = 'brick';
        b.innerText = txt.toUpperCase();
        document.getElementById('climb-frame').appendChild(b);
    }

    function nextWord() {
        let list = game.lvl < 3 ? dictionary.easy : (game.lvl < 6 ? dictionary.mid : dictionary.hard);
        game.word = list[Math.floor(Math.random() * list.length)];
        document.getElementById('target-word').innerText = game.word.toUpperCase();
    }

    function winFloor() {
        game.active = false;
        document.getElementById('level-overlay').style.display = 'flex';
    }

    function startNextLevel() {
        game.lvl++;
        game.bricks = 0;
        game.time += 15;
        document.getElementById('lvl').innerText = game.lvl;
        document.getElementById('climb-frame').innerHTML = '<div id="level-overlay" class="level-up"><h1 style="color:var(--gold)">FLOOR CLEARED!</h1><button onclick="startNextLevel()" style="padding:10px 20px; cursor:pointer; font-weight:bold;">CLIMB HIGHER</button></div>';
        document.getElementById('level-overlay').style.display = 'none';
        game.active = true;
        nextWord();
    }

    function endGame() {
        game.active = false;
        clearInterval(clock);
        let name = prompt("TIMES UP! Score: " + game.score + "\nName:");
        if(name) {
            saveScore(name, game.score);
        }
        location.reload();
    }

    function saveScore(n, s) {
        let data = JSON.parse(localStorage.getItem('spell_climb_v2') || '[]');
        data.push({n: n.substring(0,10).toUpperCase(), s: s});
        data.sort((a,b) => b.s - a.s);
        localStorage.setItem('spell_climb_v2', JSON.stringify(data.slice(0, 20)));
    }

    function renderScores() {
        let data = JSON.parse(localStorage.getItem('spell_climb_v2') || '[]');
        document.getElementById('scores-list').innerHTML = data.map((x, i) => 
            `<div class="score-row"><span>${i+1}. ${x.n}</span><span>${x.s}</span></div>`).join('');
    }
</script>
</body>
</html>
