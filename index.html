<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Spell & Sparkle | Salam Adventures</title>
  <style>
    :root{
      --bg1:#fff1f7;
      --bg2:#eefcff;
      --card:#ffffff;
      --ink:#101828;
      --muted:#667085;
      --radius:28px;
      --shadow: 0 30px 90px rgba(16,24,40,.18);
      --shadow2: 0 10px 28px rgba(16,24,40,.12);
      --edgeGlow: 0 0 18px rgba(255,255,255,.55);
      --ok:#12b76a;
      --bad:#f04438;
      --btn:#101828;
      --btnText:#fff;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(1000px 700px at 12% 18%, rgba(255,92,210,.28), transparent 55%),
        radial-gradient(900px 700px at 86% 30%, rgba(0,209,255,.20), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
      display:flex;
      align-items:center;
      justify-content:center;
      padding:16px;
    }

    /* ====== OUTER 3D FRAME (NO SPIN) ====== */
    .frame{
      width:min(860px, 100%);
      border-radius: calc(var(--radius) + 10px);
      padding:12px;
      position:relative;
      filter: drop-shadow(var(--shadow));
      isolation:isolate;
      transform: translateZ(0);
    }

    /* thick ‚Äú3D edge‚Äù base */
    .frame::before{
      content:"";
      position:absolute;
      inset:0;
      border-radius: calc(var(--radius) + 10px);
      background:
        linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.55)),
        linear-gradient(135deg, rgba(255,92,210,.25), rgba(0,209,255,.18));
      box-shadow:
        inset 0 3px 0 rgba(255,255,255,.85),
        inset 0 -10px 18px rgba(16,24,40,.10),
        0 18px 45px rgba(16,24,40,.18);
      z-index:-2;
    }

    /* flashing edge ONLY (no rotation) */
    .frame::after{
      content:"";
      position:absolute;
      inset:0;
      border-radius: calc(var(--radius) + 10px);
      padding:4px;
      background: conic-gradient(
        from 0deg,
        #ff4fd8, #7c4dff, #00d1ff, #00ff95, #ffe66d, #ff9b4a, #ff4fd8
      );
      -webkit-mask:
        linear-gradient(#000 0 0) content-box,
        linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      filter: saturate(1.1) brightness(1.05);
      opacity:.65;
      z-index:-1;
      animation: edgePulse 1.8s ease-in-out infinite;
      pointer-events:none;
    }

    @keyframes edgePulse{
      0%,100%{ opacity:.45; filter:saturate(1.05) brightness(1.00) var(--edgeGlow); }
      50%{ opacity:.85; filter:saturate(1.25) brightness(1.10) var(--edgeGlow); }
    }

    /* inner card */
    .card{
      background: rgba(255,255,255,.88);
      border:1px solid rgba(16,24,40,.10);
      border-radius: var(--radius);
      box-shadow: var(--shadow2);
      overflow:hidden;
      backdrop-filter: blur(8px);
    }

    header{
      padding:16px 16px 10px;
      display:flex;
      gap:12px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
    }

    .titleWrap{
      min-width:240px;
      flex:1;
    }

    h1{
      margin:0;
      font-size: clamp(22px, 2.4vw, 32px);
      line-height:1.1;
      letter-spacing:-.02em;
    }
    .sub{
      margin:6px 0 0;
      color:var(--muted);
      font-size: 14px;
    }

    .controls{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .btn{
      border:0;
      border-radius: 999px;
      padding:10px 14px;
      background: var(--btn);
      color: var(--btnText);
      font-weight:700;
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(16,24,40,.18);
      transition: transform .08s ease, box-shadow .15s ease;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:14px;
    }
    .btn:active{ transform: translateY(1px) scale(.99); box-shadow: 0 8px 18px rgba(16,24,40,.15); }

    .btn.secondary{
      background:#ffffff;
      color:var(--ink);
      border:1px solid rgba(16,24,40,.12);
      box-shadow: 0 10px 22px rgba(16,24,40,.10);
    }

    .toggle{
      display:inline-flex;
      align-items:center;
      gap:8px;
      background:#ffffff;
      border:1px solid rgba(16,24,40,.12);
      border-radius:999px;
      padding:8px 12px;
      font-size:14px;
      color:var(--muted);
      user-select:none;
    }
    .toggle input{ width:16px; height:16px; }

    .content{
      padding: 10px 16px 16px;
      display:flex;
      justify-content:center;
    }

    /* ====== SINGLE PANEL ====== */
    .panel{
      width: min(680px, 100%);
      background: rgba(255,255,255,.92);
      border:1px solid rgba(16,24,40,.10);
      border-radius: 24px;
      box-shadow: 0 16px 40px rgba(16,24,40,.12);
      padding: 14px;
      position:relative;
      overflow:hidden;
    }

    /* subtle 3D sheen inside panel */
    .panel::before{
      content:"";
      position:absolute;
      inset:-40% -40%;
      background: radial-gradient(circle at 25% 20%, rgba(255,255,255,.85), transparent 40%),
                  radial-gradient(circle at 80% 35%, rgba(0,209,255,.12), transparent 45%),
                  radial-gradient(circle at 45% 90%, rgba(255,92,210,.10), transparent 45%);
      pointer-events:none;
    }

    .panelInner{ position:relative; }

    .imgWrap{
      width: min(340px, 78vw);
      aspect-ratio: 1 / 1;
      border-radius: 22px;
      margin: 0 auto 10px;
      display:grid;
      place-items:center;
      overflow:hidden;
      background: linear-gradient(135deg, rgba(255,92,210,.10), rgba(0,209,255,.10));
      border: 1px solid rgba(16,24,40,.10);
      box-shadow: inset 0 2px 0 rgba(255,255,255,.8);
    }

    .imgWrap img{
      width: 78%;
      height: 78%;
      object-fit: contain;
      image-rendering:auto;
      filter: drop-shadow(0 12px 18px rgba(16,24,40,.18));
    }

    .prompt{
      text-align:center;
      margin: 6px 0 10px;
    }
    .prompt .q{
      font-weight:900;
      font-size: 18px;
      margin:0;
    }
    .prompt .hint{
      margin:4px 0 0;
      color:var(--muted);
      font-size: 13px;
    }

    .inputRow{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:center;
      flex-wrap:wrap;
      margin: 10px auto 10px;
      width:100%;
    }

    input[type="text"]{
      width: min(520px, 100%);
      font-size: 18px;
      padding: 12px 14px;
      border-radius: 14px;
      border: 2px solid rgba(0,0,0,.10);
      outline:none;
      background:#fff;
      box-shadow: inset 0 2px 0 rgba(255,255,255,.7);
    }
    input[type="text"]:focus{
      border-color: rgba(0,209,255,.55);
      box-shadow: 0 0 0 5px rgba(0,209,255,.15), inset 0 2px 0 rgba(255,255,255,.7);
    }

    .checkBtn{
      border:0;
      border-radius: 14px;
      padding: 12px 14px;
      font-weight:900;
      cursor:pointer;
      background: #101828;
      color:#fff;
      min-width: 110px;
      box-shadow: 0 10px 20px rgba(16,24,40,.18);
      -webkit-tap-highlight-color: transparent;
    }
    .checkBtn:active{ transform: translateY(1px); }

    /* ====== KEYBOARD (UNDER INPUT) ====== */
    .kbd{
      width: 100%;
      max-width: 620px;
      margin: 10px auto 6px;
      background: rgba(255,255,255,.72);
      border: 1px solid rgba(16,24,40,.10);
      border-radius: 18px;
      padding: 10px;
      box-shadow: 0 12px 28px rgba(16,24,40,.10);
    }

    .row{
      display:flex;
      gap:8px;
      justify-content:center;
      margin: 8px 0;
      flex-wrap:nowrap;
    }

    .key{
      border:1px solid rgba(16,24,40,.12);
      background:#fff;
      border-radius: 14px;
      padding: 10px 0;
      min-width: 44px;
      text-align:center;
      font-weight:900;
      cursor:pointer;
      user-select:none;
      box-shadow: inset 0 2px 0 rgba(255,255,255,.8), 0 8px 14px rgba(16,24,40,.10);
      transition: transform .06s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .key:active{ transform: translateY(1px) scale(.99); }
    .key.wide{ min-width: 96px; padding: 10px 14px; }

    .kbdActions{
      display:flex;
      gap:10px;
      justify-content:center;
      margin-top: 10px;
      flex-wrap:wrap;
    }

    .smallBtn{
      border-radius: 999px;
      padding: 10px 14px;
      font-weight:900;
      border:1px solid rgba(16,24,40,.12);
      background:#fff;
      cursor:pointer;
      box-shadow: 0 10px 22px rgba(16,24,40,.10);
      -webkit-tap-highlight-color: transparent;
    }
    .smallBtn.primary{
      background: linear-gradient(135deg, rgba(0,209,255,.22), rgba(18,183,106,.22));
      border-color: rgba(0,0,0,.06);
    }

    .status{
      width: 100%;
      max-width: 620px;
      margin: 10px auto 0;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      flex-wrap:wrap;
      color:var(--muted);
      font-size: 14px;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      background:#fff;
      border:1px solid rgba(16,24,40,.10);
      box-shadow: 0 8px 14px rgba(16,24,40,.08);
      color:var(--ink);
      font-weight:800;
      min-width: 132px;
      justify-content:center;
    }

    .pill.ok{ border-color: rgba(18,183,106,.35); }
    .pill.bad{ border-color: rgba(240,68,56,.35); }

    .msg{
      text-align:center;
      font-weight:900;
      margin-top: 8px;
      min-height: 22px;
    }
    .msg.ok{ color: var(--ok); }
    .msg.bad{ color: var(--bad); }

    /* sparkle confetti (only when correct) */
    .sparkle{
      position:absolute;
      inset:0;
      pointer-events:none;
      opacity:0;
      transition: opacity .15s ease;
    }
    .sparkle.on{ opacity:1; }
    .spark{
      position:absolute;
      width:10px;height:10px;
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, rgba(255,255,255,0) 60%),
                  radial-gradient(circle at 50% 50%, rgba(255,92,210,.95), rgba(0,209,255,.0) 65%);
      filter: drop-shadow(0 0 10px rgba(255,255,255,.8));
      animation: pop 700ms ease-out forwards;
    }
    @keyframes pop{
      0%{ transform: translate(0,0) scale(.6); opacity:0; }
      20%{ opacity:1; }
      100%{ transform: translate(var(--dx), var(--dy)) scale(1.05); opacity:0; }
    }

    /* Fit inside tight embeds */
    @media (max-width: 520px){
      header{ padding:14px 12px 8px; }
      .content{ padding: 8px 12px 12px; }
      .panel{ padding: 12px; border-radius: 20px; }
      .key{ min-width: 38px; border-radius: 12px; }
      .key.wide{ min-width: 82px; }
      input[type="text"]{ font-size:16px; }
    }
  </style>
</head>

<body>
  <div class="frame" id="frame">
    <div class="card">
      <header>
        <div class="titleWrap">
          <h1>Spell &amp; Sparkle</h1>
          <p class="sub">Press <b>Say the word</b>, then type it. Get it right to see the frame sparkle ‚ú®</p>
        </div>

        <div class="controls">
          <button class="btn" id="sayBtn">üîä Say the word</button>
          <button class="btn secondary" id="newBtn">üé≤ New word</button>
          <label class="toggle" title="Turn voice on/off">
            <input type="checkbox" id="soundToggle" checked />
            <span>Sound on</span>
          </label>
        </div>
      </header>

      <div class="content">
        <div class="panel" id="panel">
          <div class="sparkle" id="sparkleLayer"></div>

          <div class="panelInner">
            <div class="imgWrap">
              <img id="pic" src="spell-images/cat.png" alt="Picture" />
            </div>

            <div class="prompt">
              <p class="q">What word is this?</p>
              <p class="hint">Tap <b>Say the word</b>, then spell it below.</p>
            </div>

            <div class="inputRow">
              <input id="answer" type="text" autocomplete="off" autocapitalize="none" spellcheck="false" placeholder="Type here..." />
              <button class="checkBtn" id="checkBtn">‚úÖ Check</button>
            </div>

            <div class="msg" id="msg"></div>

            <div class="kbd" aria-label="On-screen keyboard">
              <div class="row" id="row1"></div>
              <div class="row" id="row2"></div>
              <div class="row" id="row3"></div>

              <div class="kbdActions">
                <button class="smallBtn" id="clearBtn">Clear</button>
                <button class="smallBtn" id="backBtn">‚å´ Backspace</button>
                <button class="smallBtn primary" id="checkBtn2">Check</button>
              </div>
            </div>

            <div class="status">
              <div class="pill ok">‚úÖ Correct: <span id="correct">0</span></div>
              <div class="pill bad">üîÅ Tries: <span id="tries">0</span></div>
              <div style="margin-left:auto; opacity:.8;">Ready.</div>
            </div>

          </div>
        </div>
      </div>

    </div>
  </div>

  <script>
    // ====== WORD LIST (USES YOUR PNGs) ======
    const WORDS = [
      { word: "cat",  img: "spell-images/cat.png"  },
      { word: "dog",  img: "spell-images/dog.png"  },
      { word: "moon", img: "spell-images/moon.png" },
      { word: "sun",  img: "spell-images/sun.png"  },
      { word: "fish", img: "spell-images/fish.png" },
      { word: "hat",  img: "spell-images/hat.png"  },
      { word: "ball", img: "spell-images/ball.png" },
      { word: "bus",  img: "spell-images/bus.png"  },
      { word: "cake", img: "spell-images/cake.png" },
      { word: "book", img: "spell-images/book.png" },
      { word: "tree", img: "spell-images/tree.png" }
    ];

    // ====== ELEMENTS ======
    const pic = document.getElementById("pic");
    const answer = document.getElementById("answer");
    const msg = document.getElementById("msg");
    const correctEl = document.getElementById("correct");
    const triesEl = document.getElementById("tries");
    const sparkleLayer = document.getElementById("sparkleLayer");
    const soundToggle = document.getElementById("soundToggle");

    const sayBtn = document.getElementById("sayBtn");
    const newBtn = document.getElementById("newBtn");
    const checkBtn = document.getElementById("checkBtn");
    const checkBtn2 = document.getElementById("checkBtn2");
    const clearBtn = document.getElementById("clearBtn");
    const backBtn = document.getElementById("backBtn");

    // ====== STATE ======
    let current = WORDS[Math.floor(Math.random() * WORDS.length)];
    let correct = 0;
    let tries = 0;

    // ====== HELPERS ======
    function setWord(item){
      current = item;
      pic.src = item.img;
      answer.value = "";
      msg.textContent = "";
      msg.className = "msg";
      answer.focus();
    }

    function normalize(s){
      return (s || "").toLowerCase().replace(/\s+/g,"").trim();
    }

    function speak(text){
      if(!soundToggle.checked) return;
      if(!("speechSynthesis" in window)) return;

      // stop any current speech
      window.speechSynthesis.cancel();

      const u = new SpeechSynthesisUtterance(text);

      // pick best available "natural" English voice
      const voices = window.speechSynthesis.getVoices() || [];
      const preferred =
        voices.find(v => /en-GB/i.test(v.lang) && /natural|google|microsoft|aria|ryan|susan|olivia/i.test(v.name)) ||
        voices.find(v => /en-GB/i.test(v.lang)) ||
        voices.find(v => /en/i.test(v.lang)) ||
        voices[0];

      if(preferred) u.voice = preferred;

      // friendly kid pacing
      u.rate = 0.95;
      u.pitch = 1.05;
      u.volume = 1;

      window.speechSynthesis.speak(u);
    }

    function sparkleBurst(){
      sparkleLayer.innerHTML = "";
      sparkleLayer.classList.add("on");

      const rect = sparkleLayer.getBoundingClientRect();
      const cx = rect.width / 2;
      const cy = rect.height / 2;

      for(let i=0;i<22;i++){
        const s = document.createElement("div");
        s.className = "spark";
        const ang = Math.random() * Math.PI * 2;
        const dist = 40 + Math.random() * 160;
        const dx = Math.cos(ang) * dist;
        const dy = Math.sin(ang) * dist;
        s.style.left = (cx + (Math.random()*40-20)) + "px";
        s.style.top  = (cy + (Math.random()*40-20)) + "px";
        s.style.setProperty("--dx", dx + "px");
        s.style.setProperty("--dy", dy + "px");
        sparkleLayer.appendChild(s);
      }

      setTimeout(()=> sparkleLayer.classList.remove("on"), 750);
    }

    function check(){
      const guess = normalize(answer.value);
      const target = normalize(current.word);

      tries++;
      triesEl.textContent = tries;

      if(guess === target){
        correct++;
        correctEl.textContent = correct;
        msg.textContent = "‚úÖ Yes! Correct!";
        msg.className = "msg ok";
        sparkleBurst();
        speak("Yes! Correct. " + current.word + ".");
        setTimeout(()=> setWord(WORDS[Math.floor(Math.random() * WORDS.length)]), 650);
      }else{
        msg.textContent = "‚ùå Try again!";
        msg.className = "msg bad";
        speak("Try again.");
      }
    }

    // ====== KEYBOARD BUILD ======
    function buildKeyboard(){
      const r1 = "QWERTYUIOP".split("");
      const r2 = "ASDFGHJKL".split("");
      const r3 = "ZXCVBNM".split("");

      const row1 = document.getElementById("row1");
      const row2 = document.getElementById("row2");
      const row3 = document.getElementById("row3");

      function addKey(row, ch){
        const k = document.createElement("div");
        k.className = "key";
        k.textContent = ch;
        k.onclick = () => {
          answer.value += ch.toLowerCase();
          answer.focus();
        };
        row.appendChild(k);
      }

      row1.innerHTML = ""; row2.innerHTML = ""; row3.innerHTML = "";
      r1.forEach(ch => addKey(row1, ch));
      r2.forEach(ch => addKey(row2, ch));
      r3.forEach(ch => addKey(row3, ch));
    }

    // ====== EVENTS ======
    sayBtn.addEventListener("click", () => speak("Spell " + current.word + "."));
    newBtn.addEventListener("click", () => setWord(WORDS[Math.floor(Math.random() * WORDS.length)]));

    checkBtn.addEventListener("click", check);
    checkBtn2.addEventListener("click", check);

    clearBtn.addEventListener("click", () => { answer.value=""; answer.focus(); });
    backBtn.addEventListener("click", () => { answer.value = answer.value.slice(0,-1); answer.focus(); });

    answer.addEventListener("keydown", (e) => {
      if(e.key === "Enter"){ e.preventDefault(); check(); }
    });

    // voices sometimes load async
    if("speechSynthesis" in window){
      window.speechSynthesis.onvoiceschanged = () => {};
    }

    // ====== INIT ======
    buildKeyboard();
    setWord(current);
  </script>
</body>
</html>
