<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Magic Colour Tap | Salam Adventures</title>
  <style>
    :root{
      --bg1:#fde7ef; --bg2:#e6f4ff; --ink:#111827; --muted:#6b7280;
      --panel:#ffffffef; --shadow: 0 20px 50px rgba(0,0,0,.1);
      --radius: 24px;
      --borderGrad: conic-gradient(from 180deg, #ff5fa2, #ffcc3a, #58e3ff, #7c5cff, #ff8b3a, #62f5a6, #ff5fa2);
    }

    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui, -apple-system, sans-serif;
      background: radial-gradient(circle at top, #fff, var(--bg2));
      height: 100vh; display: flex; align-items: center; justify-content: center;
    }

    .frame{
      width: min(1000px, 95vw); height: min(800px, 90vh);
      background: var(--borderGrad); padding: 12px; border-radius: 32px;
      box-shadow: var(--shadow); position: relative;
    }

    .card{
      height: 100%; background: #fff; border-radius: 22px;
      display: flex; flex-direction: column; overflow: hidden; position: relative;
    }

    /* --- UI Components --- */
    .header{
      padding: 15px 25px; border-bottom: 2px solid #f0f0f0;
      display: flex; justify-content: space-between; align-items: center;
    }
    .header h1 { margin: 0; font-size: 22px; color: var(--ink); }

    .controls{ display: flex; gap: 10px; }
    .btn{
      padding: 8px 16px; border-radius: 12px; border: 1px solid #ddd;
      background: #fff; cursor: pointer; font-weight: 700; transition: 0.2s;
    }
    .btn:hover{ background: #f5f5f5; transform: translateY(-1px); }
    .btn.primary { background: var(--ink); color: #fff; border: none; }

    .game-area{ flex: 1; position: relative; background: #fafafa; overflow: hidden; }

    /* --- Gallery View --- */
    .gallery {
      position: absolute; inset: 0; background: #fff; z-index: 20;
      display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
      gap: 20px; padding: 30px; overflow-y: auto;
    }
    .thumb {
      border: 2px solid #eee; border-radius: 16px; cursor: pointer;
      transition: 0.3s; background: #fff; overflow: hidden;
    }
    .thumb:hover { border-color: #ff5fa2; transform: scale(1.02); }
    .thumb svg { width: 100%; height: 180px; padding: 10px; pointer-events: none; }
    .thumb-label { padding: 10px; text-align: center; font-weight: 800; background: #f9f9f9; }

    /* --- Canvas/Drawing --- */
    .canvas-container {
      width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;
      padding: 40px; padding-bottom: 120px;
    }
    .art-svg { width: 100%; height: 100%; max-width: 750px; }
    
    /* The magic paint effect */
    .paint { transition: fill 0.2s ease; cursor: crosshair; }
    .paint:hover { filter: brightness(0.95); }

    .palette {
      position: absolute; bottom: 30px; left: 50%; transform: translateX(-50%);
      background: rgba(255,255,255,0.95); padding: 12px; border-radius: 20px;
      display: flex; gap: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      border: 1px solid #eee; backdrop-filter: blur(5px);
    }
    .swatch {
      width: 40px; height: 40px; border-radius: 50%; border: 3px solid #fff;
      cursor: pointer; box-shadow: 0 2px 5px rgba(0,0,0,0.1); transition: 0.2s;
    }
    .swatch.active { transform: scale(1.2); border-color: var(--ink); }

    .toast {
      position: absolute; top: 20px; left: 50%; transform: translateX(-50%);
      background: var(--ink); color: white; padding: 10px 25px; border-radius: 50px;
      font-weight: 800; opacity: 0; pointer-events: none; transition: 0.5s; z-index: 100;
    }
    .toast.show { opacity: 1; top: 40px; }
  </style>
</head>
<body>

<div class="frame">
  <div class="card">
    <div class="header">
      <h1>‚ú® Magic Colour Tap</h1>
      <div class="controls">
        <button class="btn" onclick="showGallery()">üñºÔ∏è Gallery</button>
        <button class="btn" onclick="resetImage()">üîÑ Reset</button>
        <button class="btn primary" onclick="surprise()">üé≤ Random</button>
      </div>
    </div>

    <div class="game-area">
      <div class="toast" id="toast">Amazing! You finished it! üåü</div>
      
      <div class="gallery" id="gallery"></div>
      
      <div class="canvas-container" id="canvasContainer">
        <div class="art-svg" id="svgHost"></div>
      </div>

      <div class="palette" id="palette"></div>
    </div>
  </div>
</div>

<script>
  const COLORS = ['#FF6FB1', '#FFD54A', '#4CC9FF', '#63F5A6', '#8B7CFF', '#FF9B3A', '#FF3B4D', '#555555', '#FFFFFF'];
  let currentColor = COLORS[0];

  // Helper for consistent SVG styling
  const s = 'fill="white" stroke="#111827" stroke-width="2.5" class="paint"';

  const PAGES = [
    {
      id: 'castle', label: 'Magical Castle',
      svg: `<svg viewBox="0 0 800 600">
        <rect width="800" height="600" fill="#fff"/>
        <path d="M200 500 h400 v-200 h-400 z" ${s}/> <path d="M200 300 l50 -80 h-100 z" ${s}/> <path d="M150 450 h100 v-150 h-100 z" ${s}/> <path d="M550 450 h100 v-150 h-100 z" ${s}/> <path d="M600 300 l50 -80 h-100 z" ${s}/> <path d="M350 500 v-100 a50 50 0 0 1 100 0 v 100 z" ${s}/> <rect x="280" y="320" width="40" height="60" ${s}/> <rect x="480" y="320" width="40" height="60" ${s}/> <path d="M300 200 l100 -120 l100 120 h-200 z" ${s}/> <path d="M100 500 q200 -50 400 0 q200 50 200 0 v 100 h-800 z" ${s}/> </svg>`
    },
    {
      id: 'space', label: 'Space Explorer',
      svg: `<svg viewBox="0 0 800 600">
        <rect width="800" height="600" fill="#fff"/>
        <circle cx="150" cy="150" r="80" ${s}/> <circle cx="120" cy="120" r="15" ${s}/> <path d="M400 100 q80 150 80 300 h-160 q0 -150 80 -300" ${s}/> <path d="M400 100 l30 50 h-60 z" ${s}/> <circle cx="400" cy="250" r="30" ${s}/> <path d="M320 350 l-50 80 l50 -20 z" ${s}/> <path d="M480 350 l50 80 l-50 -20 z" ${s}/> <path d="M350 400 q50 80 100 0" ${s}/> <path d="M650 450 r60" cx="650" cy="450" ${s}/> <ellipse cx="650" cy="450" rx="100" ry="20" fill="none" stroke="#111827" stroke-width="3"/>
      </svg>`
    },
    {
      id: 'underwater', label: 'Sea Adventure',
      svg: `<svg viewBox="0 0 800 600">
        <rect width="800" height="600" fill="#fff"/>
        <path d="M0 500 q200 -30 400 0 t 400 0 v100 h-800 z" ${s}/> <path d="M200 300 q100 -100 250 0 t 0 200 t -250 -100" ${s}/> <path d="M200 300 l-80 -50 v100 z" ${s}/> <circle cx="380" cy="330" r="10" fill="#111827"/> <path d="M500 450 q20 -100 0 -150" ${s}/> <path d="M530 450 q20 -80 0 -120" ${s}/> <circle cx="650" cy="450" r="40" ${s}/> <path d="M610 430 l-30 -20" stroke="#111827" stroke-width="5"/> <circle cx="200" cy="100" r="20" ${s}/> <circle cx="250" cy="150" r="15" ${s}/> </svg>`
    },
    {
      id: 'dragon', label: 'Dragon Lair',
      svg: `<svg viewBox="0 0 800 600">
        <rect width="800" height="600" fill="#fff"/>
        <path d="M300 450 q100 -200 300 -50 v100 h-300 z" ${s}/> <path d="M300 450 q-100 0 -100 -100 q0 -50 50 -50 h50" ${s}/> <path d="M400 320 q50 -100 150 -50 t -50 150" ${s}/> <circle cx="220" cy="320" r="5" fill="#111827"/> <path d="M600 400 l100 50 l-100 20 z" ${s}/> <path d="M100 100 q50 50 100 0" ${s}/> <circle cx="100" cy="500" r="30" ${s}/> <circle cx="140" cy="510" r="25" ${s}/> </svg>`
    },
    {
      id: 'forest', label: 'Deep Forest',
      svg: `<svg viewBox="0 0 800 600">
        <rect width="800" height="600" fill="#fff"/>
        <path d="M200 500 h40 v-200 h-40 z" ${s}/> <path d="M120 300 q100 -150 200 0 z" ${s}/> <path d="M500 500 h50 v-250 h-50 z" ${s}/> <circle cx="525" cy="200" r="80" ${s}/> <path d="M350 450 q20 -40 40 0" ${s}/> <rect x="365" y="450" width="10" height="20" ${s}/> <path d="M0 500 q400 -50 800 0 v100 h-800 z" ${s}/> <circle cx="700" cy="100" r="40" ${s}/> </svg>`
    },
    {
      id: 'hero', label: 'Superhero City',
      svg: `<svg viewBox="0 0 800 600">
        <rect width="800" height="600" fill="#fff"/>
        <rect x="50" y="300" width="100" height="200" ${s}/> <rect x="180" y="200" width="120" height="300" ${s}/> <rect x="330" y="350" width="80" height="150" ${s}/> <path d="M500 200 l50 50 l-50 50 l-50 -50 z" ${s}/> <circle cx="500" cy="180" r="20" ${s}/> <path d="M450 200 q-50 0 -20 -50" ${s}/> <path d="M600 100 h150 v50 h-150 z" ${s}/> <circle cx="70" cy="350" r="5" ${s}/> <circle cx="110" cy="350" r="5" ${s}/> </svg>`
    }
  ];

  const gallery = document.getElementById('gallery');
  const svgHost = document.getElementById('svgHost');
  const palette = document.getElementById('palette');
  const toast = document.getElementById('toast');

  function init() {
    // Build Palette
    COLORS.forEach(c => {
      const sw = document.createElement('div');
      sw.className = 'swatch' + (c === currentColor ? ' active' : '');
      sw.style.background = c;
      sw.onclick = () => {
        document.querySelector('.swatch.active').classList.remove('active');
        sw.classList.add('active');
        currentColor = c;
      };
      palette.appendChild(sw);
    });

    // Build Gallery
    PAGES.forEach(p => {
      const item = document.createElement('div');
      item.className = 'thumb';
      item.innerHTML = `${p.svg}<div class="thumb-label">${p.label}</div>`;
      item.onclick = () => loadPage(p);
      gallery.appendChild(item);
    });

    loadPage(PAGES[0]);
  }

  function loadPage(page) {
    svgHost.innerHTML = page.svg;
    gallery.style.display = 'none';
    
    // Attach click events to all "paint" classes
    const paths = svgHost.querySelectorAll('.paint');
    paths.forEach(p => {
      p.onclick = (e) => {
        e.stopPropagation();
        p.style.fill = currentColor;
        checkComplete();
      };
    });
  }

  function showGallery() {
    gallery.style.display = 'grid';
  }

  function resetImage() {
    svgHost.querySelectorAll('.paint').forEach(p => p.style.fill = 'white');
  }

  function surprise() {
    svgHost.querySelectorAll('.paint').forEach(p => {
      p.style.fill = COLORS[Math.floor(Math.random() * COLORS.length)];
    });
    checkComplete();
  }

  function checkComplete() {
    const paths = [...svgHost.querySelectorAll('.paint')];
    const done = paths.every(p => p.style.fill !== '' && p.style.fill !== 'white' && p.style.fill !== 'rgb(255, 255, 255)');
    if (done) {
      toast.classList.add('show');
      setTimeout(() => toast.classList.remove('show'), 3000);
    }
  }

  init();
</script>
</body>
</html>
