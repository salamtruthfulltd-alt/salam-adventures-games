<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Magic Colour Tap | Salam Adventures</title>
  <style>
    :root{
      --bg1:#fde7ef;
      --bg2:#e6f4ff;
      --ink:#111827;
      --muted:#6b7280;
      --panel:#ffffffef;
      --shadow: 0 26px 80px rgba(0,0,0,.16);
      --shadow2: 0 16px 34px rgba(0,0,0,.12);
      --radius: 24px;
      --borderGrad: conic-gradient(from 180deg, #ff5fa2, #ffcc3a, #58e3ff, #7c5cff, #ff8b3a, #62f5a6, #ff5fa2);
    }

    *{box-sizing:border-box}
    html,body{height:100%; overflow: hidden;}
    body{
      margin:0;
      font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
      color:var(--ink);
      background: radial-gradient(circle at top left, #fff, transparent), var(--bg2);
    }

    .wrap{ height:100vh; display:flex; align-items:center; justify-content:center; padding:20px; }

    .frame{
      width:min(1100px, 100%);
      height: min(850px, 100%);
      border-radius: calc(var(--radius) + 12px);
      background: var(--borderGrad);
      padding: 12px;
      box-shadow: var(--shadow);
      position:relative;
    }

    .card{
      height: 100%;
      border-radius: var(--radius);
      background: var(--panel);
      display: flex;
      flex-direction: column;
      overflow:hidden;
    }

    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      padding:16px 24px;
      background: white;
      border-bottom: 2px solid #f3f4f6;
    }

    .title h1{ margin:0; font-size: 24px; letter-spacing:-0.5px; }
    .title p{ margin:0; color:var(--muted); font-size:14px; font-weight: 500;}

    .controls{ display:flex; gap:8px; }

    .btn{
      border:1px solid #e5e7eb;
      background:#fff;
      padding:8px 16px;
      border-radius:12px;
      font-weight:700;
      cursor:pointer;
      transition: all 0.2s;
    }
    .btn:hover{ background: #f9fafb; transform: translateY(-1px); }
    .btn.primary{ background: #111827; color: white; border: none; }

    .game{ flex: 1; position: relative; padding: 20px; background: #f8fafc; overflow: hidden; }

    .board{
      height: 100%;
      background: white;
      border-radius: 20px;
      box-shadow: var(--shadow2);
      display: flex;
      flex-direction: column;
      position: relative;
    }

    .boardHeader{
      padding: 12px 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-bottom: 1px solid #eee;
    }

    .canvasWrap{
      flex: 1;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px;
      padding-bottom: 100px;
    }

    .art{
      width: 100%;
      height: 100%;
      max-width: 800px;
      max-height: 500px;
      cursor: crosshair;
    }
    
    .art svg{ width: 100%; height: 100%; filter: drop-shadow(0 10px 15px rgba(0,0,0,0.05)); }
    
    /* Make the paths look like they have volume */
    .paint { transition: fill 0.3s ease; }
    .paint:hover { stroke-width: 8; stroke: #000; }

    .paletteBar{
      position:absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(255,255,255,0.9);
      backdrop-filter: blur(10px);
      padding: 12px;
      border-radius: 20px;
      display: flex;
      gap: 10px;
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      border: 1px solid white;
    }

    .swatch{
      width: 42px; height: 42px;
      border-radius: 50%;
      border: 3px solid white;
      cursor: pointer;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: transform 0.2s;
    }
    .swatch.selected{ transform: scale(1.2); border-color: #111827; }

    .gallery{
      position: absolute;
      inset: 0;
      background: white;
      z-index: 10;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      padding: 30px;
      overflow-y: auto;
    }

    .thumb{
      border: 2px solid #eee;
      border-radius: 16px;
      overflow: hidden;
      cursor: pointer;
      transition: 0.3s;
      background: #fdfdfd;
    }
    .thumb:hover{ border-color: #ff5fa2; transform: translateY(-5px); }
    .thumb-svg{ height: 160px; padding: 10px; pointer-events: none; }
    .thumbLabel{ padding: 12px; font-weight: 800; text-align: center; background: #fff; }

    .toast{
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%) translateY(-20px);
      background: #111827;
      color: white;
      padding: 12px 24px;
      border-radius: 99px;
      font-weight: 800;
      opacity: 0;
      transition: 0.4s;
      z-index: 100;
    }
    .toast.show{ opacity: 1; transform: translateX(-50%) translateY(0); }

    #fx { position: absolute; inset: 0; pointer-events: none; z-index: 5; }
  </style>
</head>
<body>

<div class="wrap">
  <div class="frame">
    <div class="card">
      <div class="top">
        <div class="title">
          <h1>âœ¨ Magic Colour Tap</h1>
          <p>Pick a picture and tap to bring it to life!</p>
        </div>
        <div class="controls">
          <button class="btn" id="backBtn">ðŸ“¸ Gallery</button>
          <button class="btn" id="resetBtn">ðŸ”„ Reset</button>
          <button class="btn primary" id="surpriseBtn">ðŸŽ² Surprise</button>
        </div>
      </div>

      <div class="game">
        <div class="board">
          <div class="boardHeader">
            <span id="hint" style="font-weight:700; color:#4b5563;">Select a shape...</span>
            <span id="progress" class="btn" style="pointer-events:none">0 / 0</span>
          </div>

          <div class="canvasWrap">
            <canvas id="fx"></canvas>
            <div class="toast" id="toast">Amazing Job! ðŸŒŸ</div>
            
            <div class="gallery" id="gallery"></div>
            
            <div class="art" id="artHost"></div>

            <div class="paletteBar" id="palette"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
(() => {
  const COLORS = [
    {hex:"#FF6FB1", name:"Candy"}, {hex:"#FFD54A", name:"Sun"}, 
    {hex:"#4CC9FF", name:"Sky"}, {hex:"#63F5A6", name:"Mint"},
    {hex:"#8B7CFF", name:"Grape"}, {hex:"#FF9B3A", name:"Tiger"},
    {hex:"#FF3B4D", name:"Cherry"}, {hex:"#ffffff", name:"White"}
  ];

  let currentColor = COLORS[0].hex;
  let activePicture = null;
  const fillMap = new Set();

  // --- SVG Templates (Improved Art) ---
  const style = `fill="white" stroke="#111827" stroke-width="5" stroke-linejoin="round" class="paint"`;

  const lib = {
    ocean: `<svg viewBox="0 0 800 500">
      <rect width="800" height="500" fill="white"/>
      <path d="M0 400 Q 200 350 400 400 T 800 400 L 800 500 L 0 500 Z" ${style} data-id="sea"/>
      <path d="M150 250 Q 200 150 300 250 Q 350 350 250 350 Q 150 350 150 250" ${style} data-id="fish-body"/>
      <path d="M150 250 L 100 200 L 100 300 Z" ${style} data-id="tail"/>
      <circle cx="260" cy="230" r="8" fill="#111827" data-id="eye"/>
      <path d="M500 150 Q 550 50 650 150 Q 700 250 600 250 Q 500 250 500 150" ${style} data-id="whale"/>
      <path d="M700 80 Q 720 100 700 120" ${style} data-id="bubble1"/>
      <circle cx="550" cy="350" r="30" ${style} data-id="coral1"/>
      <circle cx="600" cy="380" r="25" ${style} data-id="coral2"/>
    </svg>`,
    
    space: `<svg viewBox="0 0 800 500">
      <rect width="800" height="500" fill="white"/>
      <path d="M350 100 Q 400 20 450 100 L 480 350 Q 400 400 320 350 Z" ${style} data-id="rocket"/>
      <path d="M320 350 L 280 420 L 350 380 Z" ${style} data-id="fin-l"/>
      <path d="M480 350 L 520 420 L 450 380 Z" ${style} data-id="fin-r"/>
      <circle cx="400" cy="200" r="30" ${style} data-id="window"/>
      <path d="M100 100 L 120 140 L 160 140 L 130 170 L 140 210 L 100 180 L 60 210 L 70 170 L 40 140 L 80 140 Z" ${style} data-id="star1"/>
      <path d="M650 300 L 670 340 L 710 340 L 680 370 L 690 410 L 650 380 L 610 410 L 620 370 L 590 340 L 630 340 Z" ${style} data-id="star2"/>
      <circle cx="150" cy="350" r="60" ${style} data-id="planet"/>
      <path d="M80 350 Q 150 300 220 350" fill="none" stroke="#111827" stroke-width="5"/>
    </svg>`,

    garden: `<svg viewBox="0 0 800 500">
      <rect width="800" height="500" fill="white"/>
      <rect x="385" y="250" width="30" height="200" ${style} data-id="stem"/>
      <circle cx="400" cy="200" r="50" ${style} data-id="center"/>
      <circle cx="400" cy="110" r="45" ${style} data-id="p1"/>
      <circle cx="490" cy="150" r="45" ${style} data-id="p2"/>
      <circle cx="490" cy="250" r="45" ${style} data-id="p3"/>
      <circle cx="400" cy="290" r="45" ${style} data-id="p4"/>
      <circle cx="310" cy="250" r="45" ${style} data-id="p5"/>
      <circle cx="310" cy="150" r="45" ${style} data-id="p6"/>
      <path d="M100 400 Q 150 300 200 400 T 300 400" ${style} data-id="bush"/>
      <path d="M600 100 Q 650 50 700 100 T 800 100" ${style} data-id="cloud"/>
    </svg>`
  };

  const PICTURES = [
    { id: 'ocean', label: 'Deep Blue Sea', html: lib.ocean },
    { id: 'space', label: 'Cosmic Journey', html: lib.space },
    { id: 'garden', label: 'Magic Flower', html: lib.garden }
  ];

  // --- Logic ---
  const artHost = document.getElementById('artHost');
  const gallery = document.getElementById('gallery');
  const palette = document.getElementById('palette');
  const progress = document.getElementById('progress');

  function init() {
    renderPalette();
    renderGallery();
    loadPicture(PICTURES[0]);
  }

  function renderPalette() {
    COLORS.forEach(c => {
      const s = document.createElement('div');
      s.className = 'swatch';
      s.style.background = c.hex;
      if(c.hex === currentColor) s.classList.add('selected');
      s.onclick = () => {
        document.querySelectorAll('.swatch').forEach(el => el.classList.remove('selected'));
        s.classList.add('selected');
        currentColor = c.hex;
      };
      palette.appendChild(s);
    });
  }

  function renderGallery() {
    PICTURES.forEach(p => {
      const div = document.createElement('div');
      div.className = 'thumb';
      div.innerHTML = `<div class="thumb-svg">${p.html}</div><div class="thumbLabel">${p.label}</div>`;
      div.onclick = () => {
        loadPicture(p);
        gallery.style.display = 'none';
      };
      gallery.appendChild(div);
    });
  }

  function loadPicture(p) {
    activePicture = p;
    artHost.innerHTML = p.html;
    fillMap.clear();
    
    const areas = artHost.querySelectorAll('.paint');
    areas.forEach(a => {
      a.onclick = (e) => {
        e.stopPropagation();
        a.style.fill = currentColor;
        fillMap.add(a.getAttribute('data-id'));
        updateProgress();
      };
    });
    updateProgress();
  }

  function updateProgress() {
    const total = artHost.querySelectorAll('.paint').length;
    progress.innerText = `${fillMap.size} / ${total}`;
    if(fillMap.size === total && total > 0) {
        document.getElementById('toast').classList.add('show');
        setTimeout(() => document.getElementById('toast').classList.remove('show'), 3000);
    }
  }

  document.getElementById('backBtn').onclick = () => gallery.style.display = 'grid';
  
  document.getElementById('resetBtn').onclick = () => {
    artHost.querySelectorAll('.paint').forEach(p => p.style.fill = 'white');
    fillMap.clear();
    updateProgress();
  };

  document.getElementById('surpriseBtn').onclick = () => {
    artHost.querySelectorAll('.paint').forEach(p => {
      const rand = COLORS[Math.floor(Math.random() * COLORS.length)].hex;
      p.style.fill = rand;
      fillMap.add(p.getAttribute('data-id'));
    });
    updateProgress();
  };

  init();
})();
</script>
</body>
</html>
