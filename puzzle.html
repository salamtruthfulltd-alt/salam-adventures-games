<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Puzzle</title>
  <style>
    :root{ --gap:10px; --radius:16px; }
    body{ margin:0; padding:24px 16px; font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; background:#fff; display:grid; place-items:start center; }
    .wrap{ width:min(900px, 96vw); display:grid; gap:14px; }
    .controls{ display:flex; gap:12px; flex-wrap:wrap; align-items:center; justify-content:space-between; }
    .btnrow{ display:flex; gap:10px; flex-wrap:wrap; }
    button{ border:0; padding:9px 14px; border-radius:999px; background:#111; color:#fff; font-weight:700; cursor:pointer; }
    button.secondary{ background:#fff; color:#111; box-shadow:inset 0 0 0 2px #111; }
    .status{ font-size:14px; opacity:.85; }

    .board{
      width:100%;
      background:#fff;
      border-radius:18px;
      box-shadow:0 14px 40px rgba(0,0,0,.12);
      padding:var(--gap);
      box-sizing:border-box;
      display:grid;
      gap:var(--gap);
      user-select:none;
      touch-action:none;
      min-height:320px;
      aspect-ratio: 3 / 2;
    }

    .tile{
      border-radius:var(--radius);
      overflow:hidden;
      background:#eef1f8;
      border:1px solid rgba(0,0,0,.08);
      box-shadow:0 8px 16px rgba(0,0,0,.10);
      cursor:grab;
      width:100%;
      height:100%;
      position:relative;
    }
    .tile:active{ cursor:grabbing; }
    .tile.dragging{ opacity:.92; outline:3px solid rgba(17,17,17,.18); z-index:9999; }

    .tile img{
      width:100%;
      height:100%;
      object-fit:contain;
      background:#fff;
      display:block;
      pointer-events:none;
      -webkit-user-drag:none;
      user-drag:none;
    }

    .badge{
      position:absolute;
      right:10px;
      bottom:10px;
      background:rgba(0,0,0,.55);
      color:#fff;
      font-weight:800;
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      letter-spacing:.2px;
      pointer-events:none;
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="controls">
      <div class="btnrow">
        <button id="hard3x2">Hard 3×2</button>
        <button id="easy2x2" class="secondary">Easy 2×2</button>
        <button id="shuffle" class="secondary">Shuffle</button>
      </div>
      <div id="status" class="status">Drag a tile onto another to swap.</div>
    </div>

    <div id="board" class="board" aria-label="Puzzle board"></div>
  </div>

  <script>
    (() => {
      const board = document.getElementById("board");
      const statusEl = document.getElementById("status");
      const btnHard = document.getElementById("hard3x2");
      const btnEasy = document.getElementById("easy2x2");
      const btnShuffle = document.getElementById("shuffle");

      // ✅ Your real files (same folder as puzzle.html)
      const IMAGES = ["star.png", "balloon.png", "salam.png"];

      let cols = 3, rows = 2;      // Hard level default
      let tiles = [];              // image filenames filling the grid
      let order = [];              // indices into tiles[]
      let draggingIndex = null;

      // HARD mode = more unique tiles by mixing + repeating in a pattern (not just 1-2-3)
      function buildHardTiles(){
        // 6 tiles for 3x2: uses all 3 images twice but in a shuffled base pattern
        // (kids see more variety and it’s harder than simple repeats)
        return ["star.png","balloon.png","salam.png","balloon.png","salam.png","star.png"];
      }

      // EASY mode = 4 tiles for 2x2: only 2 images repeated (simpler)
      function buildEasyTiles(){
        return ["star.png","balloon.png","star.png","balloon.png"];
      }

      function setModeHard3x2(){
        cols = 3; rows = 2;
        board.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
        board.style.gridTemplateRows = `repeat(${rows}, 1fr)`;
        board.style.aspectRatio = `${cols} / ${rows}`;

        btnHard.classList.remove("secondary");
        btnEasy.classList.add("secondary");

        tiles = buildHardTiles();
        order = Array.from({length: tiles.length}, (_,i)=>i);
        shuffle();
        render();
      }

      function setModeEasy2x2(){
        cols = 2; rows = 2;
        board.style.gridTemplateColumns = `repeat(${cols}, 1fr)`;
        board.style.gridTemplateRows = `repeat(${rows}, 1fr)`;
        board.style.aspectRatio = `${cols} / ${rows}`;

        btnEasy.classList.remove("secondary");
        btnHard.classList.add("secondary");

        tiles = buildEasyTiles();
        order = Array.from({length: tiles.length}, (_,i)=>i);
        shuffle();
        render();
      }

      function shuffle(){
        for(let i=order.length-1; i>0; i--){
          const j = Math.floor(Math.random()*(i+1));
          [order[i], order[j]] = [order[j], order[i]];
        }
      }

      function render(){
        board.innerHTML = "";
        let errors = 0;

        order.forEach((tileIndex, pos) => {
          const tile = document.createElement("div");
          tile.className = "tile";
          tile.draggable = true;

          const img = document.createElement("img");
          img.alt = "Puzzle image";
          img.src = tiles[tileIndex];

          img.onerror = () => {
            errors++;
            statusEl.textContent = "❌ Images not loading — keep star.png, balloon.png, salam.png in the SAME folder as puzzle.html (case-sensitive).";
          };

          const badge = document.createElement("div");
          badge.className = "badge";
          badge.textContent = (cols === 3 && rows === 2) ? "HARD" : "EASY";

          tile.appendChild(img);
          tile.appendChild(badge);

          tile.addEventListener("dragstart", onDragStart);
          tile.addEventListener("dragend", onDragEnd);
          tile.addEventListener("dragover", e => e.preventDefault());
          tile.addEventListener("drop", onDrop);

          board.appendChild(tile);
        });

        if(errors === 0) statusEl.textContent = "Drag a tile onto another to swap.";
      }

      function onDragStart(e){
        const tile = e.currentTarget;
        draggingIndex = [...board.children].indexOf(tile);

        const rect = tile.getBoundingClientRect();
        tile.style.width = rect.width + "px";
        tile.style.height = rect.height + "px";

        tile.classList.add("dragging");
        e.dataTransfer.effectAllowed = "move";
      }

      function onDragEnd(e){
        const tile = e.currentTarget;
        tile.classList.remove("dragging");
        tile.style.width = "";
        tile.style.height = "";
        draggingIndex = null;
      }

      function onDrop(e){
        e.preventDefault();
        if(draggingIndex === null) return;

        const dropIndex = [...board.children].indexOf(e.currentTarget);
        if(dropIndex === draggingIndex) return;

        [order[draggingIndex], order[dropIndex]] = [order[dropIndex], order[draggingIndex]];
        render();
      }

      btnHard.addEventListener("click", setModeHard3x2);
      btnEasy.addEventListener("click", setModeEasy2x2);
      btnShuffle.addEventListener("click", () => { shuffle(); render(); });

      // start on harder 3x2
      setModeHard3x2();
    })();
  </script>
</body>
</html>
