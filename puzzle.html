<!DOCTYPE html>
<html>
<head>
<style>
  :root { --neon-color: #00f2ff; }
  body { background: #0a0a0a; color: white; font-family: 'Courier New', monospace; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; overflow: hidden; }
  
  /* Flashing Border Effect */
  #game-container {
    border: 5px solid var(--neon-color);
    padding: 30px;
    border-radius: 15px;
    background: #111;
    text-align: center;
    width: 400px;
    animation: flash 1s infinite alternate;
    box-shadow: 0 0 20px var(--neon-color);
  }
  @keyframes flash {
    from { border-color: #00f2ff; box-shadow: 0 0 10px #00f2ff; }
    to { border-color: #ff00de; box-shadow: 0 0 30px #ff00de; }
  }

  .controls { margin-bottom: 20px; display: flex; gap: 10px; justify-content: center; }
  button { cursor: pointer; padding: 10px; border: none; border-radius: 5px; background: #333; color: white; transition: 0.3s; }
  button:hover { background: #555; }
  .active { background: #00f2ff; color: black; font-weight: bold; }
  #bonus-btn { background: #ffcc00; color: black; font-weight: bold; animation: pulse 1s infinite; }
  @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
  
  #puzzle-area { min-height: 150px; margin-top: 20px; border-top: 1px solid #444; padding-top: 20px; }
  input { padding: 8px; width: 60%; margin-bottom: 10px; background: #222; border: 1px solid #555; color: white; }
</style>
</head>
<body>

<div id="game-container">
  <h2>PUZZLE ARCADE</h2>
  
  <div class="controls">
    <button id="sfx-btn" onclick="toggleSFX()">SFX: OFF</button>
    <button id="music-btn" onclick="toggleMusic()">Music: OFF</button>
    <button id="bonus-btn" onclick="triggerBonus()">★ BONUS ★</button>
  </div>

  <div class="controls">
    <button onclick="loadPuzzle('math')">Math</button>
    <button onclick="loadPuzzle('color')">Memory</button>
    <button onclick="loadPuzzle('word')">Scramble</button>
  </div>

  <div id="puzzle-area">
    <p>Select a puzzle to begin!</p>
  </div>
</div>

<script>
  let sfxOn = false;
  let musicOn = false;
  let currentAnswer = "";

  function toggleSFX() {
    sfxOn = !sfxOn;
    document.getElementById('sfx-btn').innerText = `SFX: ${sfxOn ? 'ON' : 'OFF'}`;
    document.getElementById('sfx-btn').classList.toggle('active');
  }

  function toggleMusic() {
    musicOn = !musicOn;
    document.getElementById('music-btn').innerText = `Music: ${musicOn ? 'ON' : 'OFF'}`;
    document.getElementById('music-btn').classList.toggle('active');
    if(sfxOn) playBeep(200);
  }

  function triggerBonus() {
    alert("BONUS ACTIVATED! You earned 500 imaginary points!");
    if(sfxOn) playBeep(800);
  }

  function playBeep(freq) {
    if(!sfxOn) return;
    const context = new (window.AudioContext || window.webkitAudioContext)();
    const osc = context.createOscillator();
    osc.type = "sine";
    osc.frequency.setValueAtTime(freq, context.currentTime);
    osc.connect(context.destination);
    osc.start();
    osc.stop(context.currentTime + 0.1);
  }

  function loadPuzzle(type) {
    const area = document.getElementById('puzzle-area');
    if(sfxOn) playBeep(440);
    
    if (type === 'math') {
      const a = Math.floor(Math.random() * 12) + 1;
      const b = Math.floor(Math.random() * 12) + 1;
      currentAnswer = a * b;
      area.innerHTML = `<h3>Quick Math</h3><p>What is ${a} x ${b}?</p>
                        <input type="number" id="ans"><br>
                        <button onclick="checkAns('math')">Submit</button>`;
    } else if (type === 'word') {
      const words = ['GALAXY', 'MATRIX', 'PUZZLE', 'CYBER'];
      const word = words[Math.floor(Math.random() * words.length)];
      currentAnswer = word;
      const scrambled = word.split('').sort(() => 0.5 - Math.random()).join('');
      area.innerHTML = `<h3>Word Scramble</h3><p>Unscramble: <strong>${scrambled}</strong></p>
                        <input type="text" id="ans"><br>
                        <button onclick="checkAns('word')">Submit</button>`;
    } else if (type === 'color') {
      area.innerHTML = `<h3>Color Code</h3><p>Which color is often associated with "Stop"?</p>
                        <input type="text" id="ans"><br>
                        <button onclick="checkAns('color')">Submit</button>`;
      currentAnswer = "red";
    }
  }

  function checkAns(type) {
    const val = document.getElementById('ans').value.toLowerCase();
    if (val == currentAnswer.toString().toLowerCase()) {
      alert("CORRECT!");
      if(sfxOn) playBeep(600);
      loadPuzzle(type);
    } else {
      alert("Try again!");
      if(sfxOn) playBeep(150);
    }
  }
</script>
</body>
</html>
