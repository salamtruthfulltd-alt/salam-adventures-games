<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Emoji Friendship Club</title>
    <style>
        :root {
            --pink: #ff85a2;
            --purple: #a29bfe;
            --yellow: #ffeaa7;
            --glass: rgba(255, 255, 255, 0.4);
        }

        body {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            background: radial-gradient(circle, #fff0f3 0%, #ffdee9 100%);
            font-family: 'Rounded Mplus 1c', 'Comic Sans MS', sans-serif;
            overflow: hidden;
            touch-action: manipulation;
        }

        /* The Play Space */
        #stage {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
        }

        /* The High-End Bubble */
        .bubble-wrap {
            position: relative;
            width: 280px;
            height: 280px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            animation: float 4s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(-2deg); }
            50% { transform: translateY(-20px) rotate(2deg); }
        }

        .bubble-skin {
            position: absolute;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: var(--glass);
            border: 4px solid rgba(255, 255, 255, 0.8);
            box-shadow: inset -10px -10px 40px rgba(255, 255, 255, 0.5), 
                        inset 10px 10px 30px rgba(0, 0, 0, 0.05),
                        0 15px 40px rgba(255, 133, 162, 0.3);
            backdrop-filter: blur(4px);
            z-index: 2;
        }

        .emoji-face {
            font-size: 140px;
            z-index: 1;
            user-select: none;
            transition: transform 0.3s;
        }

        /* The Control Panel */
        .bottom-panel {
            background: white;
            border-radius: 40px 40px 0 0;
            padding: 20px;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.08);
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 10;
        }

        .row {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .btn {
            width: 85px;
            height: 85px;
            border: none;
            border-radius: 25px;
            font-size: 45px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.1s;
            position: relative;
            overflow: hidden;
        }

        .btn-wand { background: var(--purple); box-shadow: 0 8px #6c5ce7; color: white; }
        .btn-gift { background: var(--pink); box-shadow: 0 8px #d63031; color: white; }
        
        .btn:active {
            transform: translateY(6px);
            box-shadow: 0 2px rgba(0,0,0,0.2);
        }

        /* Particle Magic */
        .sparkle {
            position: absolute;
            pointer-events: none;
            z-index: 20;
            animation: burst 0.8s ease-out forwards;
        }

        @keyframes burst {
            0% { transform: translate(0,0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="stage">
        <div id="bubble-container" class="bubble-wrap">
            <div id="bubble-shield" class="bubble-skin"></div>
            <div id="face" class="emoji-face">üò¢</div>
        </div>
    </div>

    <div class="bottom-panel">
        <div id="wand-row" class="row">
            <button class="btn btn-wand" onclick="popBubble()">ü™Ñ</button>
            <button class="btn btn-wand" onclick="popBubble()">‚ú®</button>
        </div>
        <div id="gift-row" class="row hidden">
            <button class="btn btn-gift" onclick="giveTreat('üçé')">üçé</button>
            <button class="btn btn-gift" onclick="giveTreat('üç¨')">üç¨</button>
            <button class="btn btn-gift" onclick="giveTreat('üéÅ')">üéÅ</button>
        </div>
    </div>

<script>
    let faces = ['üò¢', 'üò°', 'üò¥', 'üò®', 'üòã'];
    let current = 0;
    let isPopped = false;

    const face = document.getElementById('face');
    const shield = document.getElementById('bubble-shield');
    const wandRow = document.getElementById('wand-row');
    const giftRow = document.getElementById('gift-row');
    const stage = document.getElementById('stage');

    function popBubble() {
        if(isPopped) return;
        isPopped = true;

        // Visual Pop
        shield.classList.add('hidden');
        face.innerText = 'üòÆ';
        face.style.transform = 'scale(1.3)';
        
        // Show Particles
        createExplosion('‚ú®', 15);

        // Switch UI
        wandRow.classList.add('hidden');
        giftRow.classList.remove('hidden');
    }

    function giveTreat(item) {
        if(!isPopped) return;

        // Emoji Reaction
        face.innerText = 'üòÑ';
        face.style.transform = 'scale(1.5)';
        createExplosion(item, 8);
        createExplosion('‚ù§Ô∏è', 8);

        // Reset to next level
        setTimeout(() => {
            current = (current + 1) % faces.length;
            isPopped = false;
            
            // Reset Visuals
            shield.classList.remove('hidden');
            face.innerText = faces[current];
            face.style.transform = 'scale(1)';
            
            // Reset UI
            wandRow.classList.remove('hidden');
            giftRow.classList.add('hidden');
        }, 2000);
    }

    function createExplosion(char, count) {
        for(let i=0; i<count; i++) {
            const s = document.createElement('div');
            s.className = 'sparkle';
            s.innerText = char;
            s.style.fontSize = (Math.random() * 20 + 30) + 'px';
            
            const tx = (Math.random() - 0.5) * 400;
            const ty = (Math.random() - 0.5) * 400;
            s.style.setProperty('--tx', tx + 'px');
            s.style.setProperty('--ty', ty + 'px');
            
            s.style.left = '50%';
            s.style.top = '50%';
            
            stage.appendChild(s);
            setTimeout(() => s.remove(), 800);
        }
    }
</script>
</body>
</html>
