<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Emoji Pop Deluxe</title>
    <style>
        :root {
            --bg: #fff0f5;
            --primary: #ff69b4;
            --secondary: #9370db;
        }
        body { 
            margin: 0; 
            height: 100vh; 
            display: flex; 
            flex-direction: column; 
            background: var(--bg); 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            overflow: hidden;
            touch-action: manipulation;
        }
        #game-area { 
            flex-grow: 1; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            perspective: 1000px;
        }

        /* High-End Bubble Effect */
        #emoji-container {
            width: 260px;
            height: 260px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            font-size: 130px;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            user-select: none;
            position: relative;
        }

        .bubble-active {
            background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9) 0%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.5) 100%);
            border: 4px solid rgba(255,255,255,0.8);
            box-shadow: 0 20px 50px rgba(0,0,0,0.1), inset 0 0 60px rgba(255,255,255,0.8);
            backdrop-filter: blur(4px);
        }

        /* Bounce Animation */
        .bounce { animation: bounce 0.5s ease; }
        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(0.85); }
        }

        /* UI Trays */
        .tray { 
            display: flex; 
            justify-content: center; 
            gap: 20px; 
            padding: 25px; 
            background: white;
            border-radius: 40px 40px 0 0;
            box-shadow: 0 -10px 30px rgba(0,0,0,0.05);
        }
        .item { 
            width: 85px; height: 85px; 
            background: #f8f9fa;
            border-radius: 25px; 
            font-size: 45px; 
            border: none; 
            box-shadow: 0 8px #ddd;
            cursor: pointer;
            transition: 0.1s;
            display: flex; align-items: center; justify-content: center;
        }
        .item:active { transform: translateY(6px); box-shadow: 0 2px #ddd; }
        .wand-btn { background: var(--secondary); color: white; box-shadow: 0 8px #6a4ea1; }
        .gift-btn { background: var(--primary); color: white; box-shadow: 0 8px #d81b60; }

        /* Effects */
        .particle { 
            position: absolute; 
            font-size: 50px; 
            pointer-events: none;
            animation: popOut 0.8s ease-out forwards; 
        }
        @keyframes popOut {
            0% { transform: translate(0,0) scale(0); opacity: 1; }
            100% { transform: translate(var(--x), var(--y)) scale(1.5); opacity: 0; }
        }
        .shake { animation: shake 0.3s ease-in-out; }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }
    </style>
</head>
<body>

<div id="game-area">
    <div id="emoji-container" class="bubble-active">üò¢</div>
</div>

<div class="tray" style="padding-bottom: 10px;">
    <button class="item wand-btn" onclick="popMe()">ü™Ñ</button>
    <button class="item wand-btn" onclick="popMe()">üåü</button>
</div>

<div class="tray">
    <button class="item gift-btn" onclick="feed('üçé')">üçé</button>
    <button class="item gift-btn" onclick="feed('üç¨')">üç¨</button>
    <button class="item gift-btn" onclick="feed('üéÅ')">üéÅ</button>
</div>

<script>
    let popped = false;
    let faces = ['üò¢', 'üò°', 'üò¥', 'üò®', 'üòã'];
    let current = 0;
    const emoji = document.getElementById('emoji-container');

    function popMe() {
        if(popped) return;
        popped = true;
        
        document.body.classList.add('shake');
        setTimeout(() => document.body.classList.remove('shake'), 300);

        emoji.classList.remove('bubble-active');
        emoji.classList.add('bounce');
        emoji.innerText = 'üòÆ';
        
        burst('‚ú®');
    }

    function feed(item) {
        if(!popped) return;
        
        emoji.innerText = 'üòÑ';
        emoji.style.transform = 'scale(1.2)';
        burst(item);
        burst('‚ù§Ô∏è');

        setTimeout(() => {
            current = (current + 1) % faces.length;
            emoji.innerText = faces[current];
            emoji.classList.add('bubble-active');
            emoji.style.transform = 'scale(1)';
            emoji.classList.remove('bounce');
            popped = false;
        }, 2000);
    }

    function burst(symbol) {
        for(let i=0; i<8; i++) {
            const p = document.createElement('div');
            p.className = 'particle';
            p.innerText = symbol;
            p.style.setProperty('--x', (Math.random()*400 - 200) + 'px');
            p.style.setProperty('--y', (Math.random()*400 - 200) + 'px');
            p.style.left = '50%';
            p.style.top = '50%';
            document.getElementById('game-area').appendChild(p);
            setTimeout(() => p.remove(), 800);
        }
    }
</script>
</body>
</html>
